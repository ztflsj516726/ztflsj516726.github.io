---
title: el-table中row-key的作用
date: 2025-05-09 17:51:31
tags: 
  - elementui
  - row-key
---

### row-key的作用

- 提高虚拟 DOM diff 性能（Vue 可以更准确地知道哪一行数据变了）
- 维持用户交互状态（例如展开行、选中状态、编辑状态等）



> [!Warning]
>
> 如果 `row-key` 重复，会导致以下严重问题：
>
> ### 1. **数据渲染混乱**
>
> Vue 会复用已有的 DOM 节点，导致：
>
> - 旧的数据和新数据混在一起(重要)
> - 某些行不会更新显示
> - 内容对不上数据
>
> ### 2. **选中状态错乱**
>
> 如启用了多选功能（`@selection-change`），会出现：
>
> - 勾选一行后，其他几行也自动被勾选或取消
> - 勾选后取消选择某行，结果其他行一起取消
>
> ### 3. **展开行错位**
>
> 使用了 `expand` 插槽时（展开子表等）：
>
> - 展开的行显示错数据
> - 展开状态无法收回或错乱
>
> ### 4. **更新数据后视图无变化**
>
> 你更新了数据，`el-table` 由于找不到变更（因为认为 key 没变），导致行显示内容不变。



> [!NOTE]
>
> 踩坑历史
>
> 因为后端返回的数据有几条数据的id一样，但是我的`row-key`设置的就是`id`，导致旧的数据一直再列表中，跟新数据混合在一起。
>
> 造成的后果就是每次调用查询接口我的数据就多几条！！所以row-key一定要设置成唯一的值。

